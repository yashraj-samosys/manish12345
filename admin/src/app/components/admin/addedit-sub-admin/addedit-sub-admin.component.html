<section class="mb-4">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="col-md-12">

                    <h4 class="col-md-6" style="float: left;">{{id == 0 ? "Add Sub Admin" : "Edit Sub Admin"}}</h4>

                    <div class="d-sm-flex  col-md-6" style="float: left;">
                        <span class="m-auto"></span>
                        <button class="btn btn-outline-secondary mr-3 mb-sm-0 mb-3"
                            [routerLink]="['/admin/subadminlist']">Back To
                            List</button>
                    </div>
                </div>

                <!-- <div class="input-group mb-10">
                    <div class="custom-file viewimg">
                        <img src="{{showImg == '' ? './assets/images/avatar.jpg' : showImg }}" alt="">

                    </div>

                </div> -->

                <!-- <div class="input-group mb-10">
                    <div class="custom-file viewimg">
                        <span class="m-auto pencileBtn">
                            <img src="{{showImg.image == '' ? './assets/images/avatar.jpg' : showImg.image }}" alt="">
                            <i (click)="open(modalCropper)" class="i-Crop-2 pencileInner"></i>
                        </span>
                    </div>

                </div> -->

                <div class="input-group mb-10">
                    <div class="custom-file viewimg">
                        <span class="m-auto pencileBtn">
                            <img src="{{data?.image ? data?.image : './assets/images/avatar.jpg' }}"
                                alt="Package Image" #img01 (error)="img01.src = './assets/images/avatar.jpg'">
                            <i (click)="open(modalCropper)" class="i-Crop-2 pencileInner"></i>
                        </span>
                    </div>
                </div>

                <div class="card ">
                    <div class="card-body">
                        <form [formGroup]="addEditForm" (ngSubmit)="addEdit()">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Name <span class="text-red">*</span></label>
                                        <input onkeypress="if(this.value.length > 70) return false;"
                                            maxlength="{{validations_cnfg.m50}}" formControlName="user_name" type="text"
                                            onkeypress='return ((event.charCode >= 65 && event.charCode <= 90) || (event.charCode >= 97 && event.charCode <= 122) || (event.charCode == 32) )'
                                            class="form-control" placeholder="User Name">
                                        <div *ngIf="addEditForm.controls['user_name'].errors && (!addEditForm.controls['user_name'].pristine || submitted ||addEditForm.controls['user_name'].touched )"
                                            class="error-msg">
                                            <div [hidden]="!addEditForm.controls['user_name'].errors.required">Name
                                                is required
                                            </div>
                                            <div [hidden]="!addEditForm.controls['user_name'].errors.pattern">Name
                                                is invalid
                                            </div>
                                            <div [hidden]="!addEditForm.controls['user_name'].errors.maxlength">Name
                                                is too large
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Email <span class="text-red">*</span></label>
                                        <input maxlength="{{validations_cnfg.m50}}"
                                            onkeypress="if(this.value.length > 50) return false; return event.charCode != 32"
                                            formControlName="email" type="email" class="form-control"
                                            placeholder="Email">
                                        <div *ngIf="addEditForm.controls['email'].errors && (!addEditForm.controls['email'].pristine || submitted ||addEditForm.controls['email'].touched )"
                                            class="error-msg">
                                            <div [hidden]="!addEditForm.controls['email'].errors.required">Email is
                                                required</div>
                                                <div *ngIf="f.email.errors.pattern || f.email.errors.email">Email is invalid</div>
                                            <div [hidden]="!addEditForm.controls['email'].errors.maxlength">Email is too
                                                large
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6" *ngIf="id == 0">
                                    <div class="form-group">
                                        <label>Password <span class="text-red">*</span></label>
                                        <input maxlength="{{validations_cnfg.m50}}"
                                            onkeypress="if(this.value.length > 50) return false; return event.charCode != 32"
                                            formControlName="password" [type]="showHidePass ? 'password' : 'text'"
                                            class="form-control" placeholder="Password">
                                        <a href="javascript:void(0);" (click)="showHidePassword()" id="show"><span
                                                [ngClass]="showHidePass ? 'fas fa-eye-slash eye-icon' : 'far fa-eye eye-icon'"></span></a>

                                        <div *ngIf="addEditForm.controls['password'].errors && (!addEditForm.controls['password'].pristine || submitted ||addEditForm.controls['password'].touched )"
                                            class="error-msg">
                                            <div [hidden]="!addEditForm.controls['password'].errors.required">Password
                                                is
                                                required</div>
                                            <div [hidden]="!addEditForm.controls['password'].errors.maxlength">Password
                                                is
                                                too large</div>
                                            <div [hidden]="!addEditForm.controls['password'].errors.minlength">Password
                                                should be at least 6 digits</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-2">
                                    <div class="form-group">
                                        <label>Phone Code </label>
                                        <!-- <select formControlName="country_code_id" class="form-control">
                                            <option [selected] value=39>Canada(+1)</option>
                                            <option value=''>Select</option>
                                            <option *ngFor="let item of code" [value]="item.id">
                                                {{item.name}}(+{{item.phonecode}})</option>
                                        </select> -->
                                        <select disabled formControlName="country_code_id" class="form-control">
                                            <option value=39>Canada(+1)</option>

                                        </select>
                                        <div *ngIf="addEditForm.controls['country_code_id'].errors && (!addEditForm.controls['country_code_id'].pristine || submitted ||addEditForm.controls['country_code_id'].touched )"
                                            class="error-msg">
                                            <!-- <div [hidden]="!addEditForm.controls['country_code_id'].errors.required">
                                                Phone
                                                code is required
                                            </div> -->
                                        </div>
                                    </div>
                                </div>


                                <!-- <div class="col-md-4">
                                    <div class="form-group">
                                        <label>Mobile </label>
                                        <input
                                            onKeyPress="if(this.value.length==15) return false;return event.charCode >= 48 && event.charCode <= 57"
                                            formControlName="mobile" type="text" class="form-control"
                                            placeholder="Mobile No">
                                        <div *ngIf="addEditForm.controls['mobile'].errors && (!addEditForm.controls['mobile'].pristine || submitted ||addEditForm.controls['mobile'].touched )"
                                            class="error-msg">
                                            <div [hidden]="!addEditForm.controls['mobile'].errors.required">Mobile No.
                                                is
                                                required
                                            </div>
                                            <div [hidden]="!addEditForm.controls['mobile'].errors('minlength')">Mobile
                                                No.
                                                should
                                                be 8 to 15 digit.
                                            </div>
                                        </div>
                                    </div>
                                </div> -->

                                <div class="col-lg-4 form-group ">
                                    <div class="form-floating">
                                        <label>Phone <span class="text-red">*</span> </label>
                                        <input  maxlength="{{validations_cnfg.m15}}" onkeypress="if(this.value.length > 15) return false; return event.charCode >= 48 && event.charCode <= 57"
                                            formControlName="mobile" type="text" class="form-control" minlength="8"
                                            placeholder="Phone">
                                        <div *ngIf="addEditForm.controls['mobile'].errors && (!addEditForm.controls['mobile'].pristine || submitted ||addEditForm.controls['mobile'].touched )"
                                            class="error-msg">
                                            <div [hidden]="!addEditForm.controls['mobile'].errors.required">Phone is
                                                required
                                            </div>
                                            <div [hidden]="!addEditForm.controls['mobile'].errors.minlength">Phone
                                                number should be 8 to 15 digit
                                            </div>
                                            <div [hidden]="!addEditForm.controls['mobile'].errors.maxlength">Phone
                                                number should be 8 to 15 digit
                                            </div>
                                            <div [hidden]="!addEditForm.controls['mobile'].errors.pattern">Invalid phone
                                                number
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- <div class="col-md-6">
                                    <div class="input-group mb-3 form-group">
                                        <label>Profile</label>
                                        <div class="custom-file form-group w-100">
                                            <input formControlName="profile_img" type="file" accept="image/*"
                                                (change)="fileUpload($event)" class="custom-file-input form-control"
                                                id="inputGroupFile02">
                                            <label class="custom-file-label" for="inputGroupFile02"
                                                aria-describedby="inputGroupFileAddon02"> {{imageName ?
                                                imageName : 'Upload Profile' }}</label>
                                        </div>
                                        <div *ngIf="addEditForm.controls['profile_img'].errors && (!addEditForm.controls['profile_img'].pristine || submitted ||addEditForm.controls['profile_img'].touched )"
                                            class="error-msg">
                                            <div [hidden]="!addEditForm.controls['profile_img'].errors.required">Profile
                                                Picture is required
                                            </div>
                                        </div>
                                    </div>
                                </div> -->

                                <div class="col-md-6">
                                    <div class="form-group ">
                                        <label>Select Pages <span class="text-red">*</span></label>
                                        <div class="multi-select-m">
                                            <!-- <angular2-multiselect class="form-control" [settings]="settings" [data]="navbar" [(ngModel)]="selectedItems"
                                        formControlName="pageselect">
                                      </angular2-multiselect> -->
                                            <ng-select [multiple]="true" formControlName="pageselect">
                                                <ng-option [disabled]="item.id == 1" *ngFor="let item of navbar"
                                                    [value]="item.id">
                                                    {{item.name}}</ng-option>
                                            </ng-select>
                                        </div>
                                        <div *ngIf="addEditForm.controls['pageselect'].errors && (!addEditForm.controls['pageselect'].pristine || submitted ||addEditForm.controls['pageselect'].touched )"
                                            class="error-msg">
                                            <div [hidden]="!addEditForm.controls['pageselect'].errors.required">Page
                                                is required
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <button style="float: right;" type="submit" class="btn btn-primary btn-rounded m-1">
                                {{ id ==
                                0 ?
                                'Add' :
                                'Update'}}
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<ng-template #modalCropper let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Upload & Crop</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>

    <div class="modal-body text-center">
        <img-cropper #cropper [image]="data" [settings]="cropperSettings" (change)="fileChangeEvent($event)">
        </img-cropper>
        <br>
        <img *ngIf="data?.image" class="mt-3 mr-3" [src]="data?.image" [width]="100" [height]="100">

    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-rounded btn-outline-dark" (click)="modal.close('Save click')">Save</button>
    </div>
</ng-template>
